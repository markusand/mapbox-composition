{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/controls/StylesControl.js","../src/terrain.js","../src/controls/TerrainControl.js","../src/layer.js","../src/events/events.source.js","../src/events/events.layer.js","../src/popup.js","../src/controls/index.js","../src/geojson.js","../src/map.js","../src/marker.js","../src/events/events.marker.js","../src/events/events.popup.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './styles.control.css';\n\nexport default class StylesControl {\n\tconstructor({ styles }) {\n\t\tthis._styles = styles;\n\t\tthis._active = null;\n\t\tthis._setActive = this._setActive.bind(this);\n\t}\n\n\tonAdd(map) {\n\t\tthis._map = map;\n\n\t\tthis._container = document.createElement('div');\n\t\tthis._container.classList.add('mapboxgl-ctrl', 'mapboxgl-ctrl-group', 'mapboxgl-ctrl-styles');\n\n\t\tthis._buttons = this._styles.map(style => {\n\t\t\tconst button = document.createElement('button');\n\t\t\tif (style.img) {\n\t\t\t\tconst thumbnail = document.createElement('img');\n\t\t\t\tthumbnail.src = style.img;\n\t\t\t\tbutton.appendChild(thumbnail);\n\t\t\t} else {\n\t\t\t\tconst label = document.createElement('span');\n\t\t\t\tlabel.textContent = style.label;\n\t\t\t\tbutton.appendChild(label);\n\t\t\t}\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tif (this._active !== style.name) this._map.setStyle(style.url);\n\t\t\t});\n\t\t\tthis._container.appendChild(button);\n\t\t\treturn button;\n\t\t});\n\n\t\tthis._map.on('style.load', this._setActive);\n\n\t\tthis._setActive();\n\n\t\treturn this._container;\n\t}\n\n\t_setActive() {\n\t\tthis._buttons.forEach(button => button.classList.remove('is-active'));\n\t\tconst { name } = this._map.getStyle();\n\t\tconst index = this._styles.findIndex(style => style.name === name);\n\t\tif (index >= 0) this._buttons[index].classList.add('is-active');\n\t\tthis._active = name;\n\t}\n\n\tonRemove() {\n\t\tthis._container.parentNode.removeChild(this._container);\n\t\tthis._map.off('style.load', this._setActive);\n\t\tthis._map = undefined;\n\t}\n}\n","const TERRAIN = {\n\ttype: 'raster-dem',\n\turl: 'mapbox://mapbox.mapbox-terrain-dem-v1',\n\ttileSize: 512,\n};\n\nconst SKY = {\n\t'sky-opacity': ['interpolate', ['linear'], ['zoom'], 0, 0, 8, 1],\n\t'sky-type': 'atmosphere',\n\t'sky-atmosphere-sun-intensity': 5,\n};\n\nexport default function useTerrain(map, options = {}) {\n\tconst { sky = SKY, ...rest } = options;\n\n\tconst extrude = ({ exaggeration = 1.5, pitch = 45 }) => {\n\t\tmap.addSource('mapboxgl-dem', { ...TERRAIN, ...rest });\n\t\tmap.setTerrain({ source: 'mapboxgl-dem', exaggeration });\n\t\tmap.easeTo({ pitch });\n\t\tif (sky && !map.getLayer('mapboxgl-sky')) {\n\t\t\tmap.addLayer({ id: 'mapboxgl-sky', type: 'sky', paint: sky });\n\t\t}\n\t};\n\n\tconst flatten = () => {\n\t\tmap.setTerrain();\n\t\tmap.easeTo({ pitch: 0 });\n\t\tif (map.getSource('mapboxgl-dem')) map.removeSource('mapboxgl-dem');\n\t\tif (map.getLayer('mapboxgl-sky')) map.removeLayer('mapboxgl-sky');\n\t};\n\n\tconst isExtruded = () => !!map.getTerrain();\n\n\treturn { extrude, flatten, isExtruded };\n}\n","import useTerrain from '../terrain';\nimport './terrain.control.css';\n\nexport default class TerrainControl {\n\tconstructor(options = {}) {\n\t\tthis._options = options;\n\t}\n\n\tonAdd(map) {\n\t\tconst { extrudeOnInit = false, exaggeration, pitch, ...options } = this._options;\n\t\tconst terrain = useTerrain(map, options);\n\n\t\tthis._container = document.createElement('div');\n\t\tthis._container.classList.add('mapboxgl-ctrl', 'mapboxgl-ctrl-group');\n\n\t\tconst button = document.createElement('button');\n\t\tbutton.classList.add('mapboxgl-ctrl-terrain');\n\t\tthis._container.appendChild(button);\n\n\t\tconst extrude = doExtrude => {\n\t\t\tif (doExtrude) terrain.extrude({ exaggeration, pitch });\n\t\t\telse terrain.flatten();\n\t\t\tbutton.classList.toggle('mapboxgl-ctrl-terrain-3d', doExtrude);\n\t\t};\n\n\t\tbutton.addEventListener('click', () => extrude(!terrain.isExtruded()));\n\n\t\t// Reload terrain extrusion state on map style change\n\t\tmap.on('style.load', () => extrude(terrain.isExtruded()));\n\n\t\textrude(extrudeOnInit);\n\n\t\treturn this._container;\n\t}\n\n\tonRemove() {\n\t\tthis._container.parentNode.removeChild(this._container);\n\t}\n}\n","import { useSourceEvents, useLayerEvents } from './events';\n\nconst isObject = item => !!item && item.constructor === Object;\n\nexport default function useLayer(map, options = {}) {\n\tconst { bindSourceEvents, unbindSourceEvents } = useSourceEvents(map, options.name, options);\n\tconst { bindLayerEvents, unbindLayerEvents } = useLayerEvents(map, options);\n\tconst LAYERS = [];\n\n\tconst isVisible = id => map.getLayoutProperty(id, 'visibility') === 'visible';\n\n\tconst setVisibility = (visible, layers = Object.keys(LAYERS)) => {\n\t\tconst visibility = visible ? 'visible' : 'none';\n\t\tlayers.forEach(id => {\n\t\t\tLAYERS[id].visible = visible;\n\t\t\tmap.setLayoutProperty(id, 'visibility', visibility);\n\t\t});\n\t};\n\n\tconst setFilters = (filters = [], layers = Object.keys(LAYERS)) => {\n\t\tconst all = isObject(filters) ? ['all', ...Object.values(filters).filter(Boolean)] : filters;\n\t\tlayers.forEach(id => {\n\t\t\tLAYERS[id].filter = all && all.length ? all : LAYERS[id].filter;\n\t\t\tmap.setFilter(id, LAYERS[id].filter);\n\t\t});\n\t};\n\n\tconst clearLayers = (layers = Object.keys(LAYERS)) => {\n\t\tlayers.forEach(id => {\n\t\t\tunbindLayerEvents(id);\n\t\t\tif (map.getLayer(id)) map.removeLayer(id);\n\t\t\tif (id in LAYERS) delete LAYERS[id];\n\t\t});\n\t};\n\n\tconst addLayers = (layers = []) => {\n\t\tconst { name: sourceName, persist = true } = options;\n\t\tlayers.forEach(({ name, visible = true, ...params }, i) => {\n\t\t\tconst id = name || `${sourceName}--${i}`;\n\t\t\tLAYERS[id] = { name, ...params };\n\t\t\tmap.addLayer({ id, source: sourceName, ...params });\n\t\t\tsetVisibility(visible, [id]);\n\t\t\tbindLayerEvents(id);\n\t\t});\n\t\tif (persist) map.once('style.load', () => addLayers(Object.values(LAYERS)));\n\t};\n\n\tconst clearSource = () => {\n\t\tconst { name } = options;\n\t\tclearLayers();\n\t\tunbindSourceEvents();\n\t\tif (map.getSource(name)) map.removeSource(name);\n\t};\n\n\tconst setSource = source => {\n\t\tconst { name, type, persist = true } = options;\n\t\tconst key = type === 'geojson' ? 'data' : 'url';\n\t\tconst content = isObject(source) ? source : { [key]: source };\n\t\tmap.addSource(name, { type, ...content });\n\t\tbindSourceEvents();\n\t\tif (persist) map.once('style.load', () => setSource(source));\n\t};\n\n\tconst updateSource = (source, layers = options.layers) => {\n\t\tclearSource();\n\t\tsetSource(source);\n\t\taddLayers(layers);\n\t};\n\n\tsetSource(options.source);\n\taddLayers(options.layers);\n\n\treturn {\n\t\tclearLayers,\n\t\taddLayers,\n\t\tclearSource,\n\t\tsetSource,\n\t\tupdateSource,\n\t\tisVisible,\n\t\tsetVisibility,\n\t\tsetFilters,\n\t};\n}\n","export default (map, sourceId, { onError, onLoadStart, onLoadEnd }) => {\n\tlet isSourceLoading = false;\n\n\tconst sourceLoadStartHandler = event => {\n\t\tconst { sourceDataType = 'content' } = event; // Little hack here\n\t\tif (event.sourceId === sourceId && !isSourceLoading && sourceDataType === 'content') {\n\t\t\tif (onLoadStart) onLoadStart(event);\n\t\t\tisSourceLoading = true;\n\t\t}\n\t};\n\n\tconst sourceLoadEndHandler = event => {\n\t\tif (event.sourceId === sourceId && isSourceLoading && map.isSourceLoaded(sourceId)) {\n\t\t\tif (onLoadEnd) onLoadEnd(event);\n\t\t\tisSourceLoading = false;\n\t\t}\n\t};\n\n\tconst sourceErrorHandler = event => {\n\t\tif (event.sourceId === sourceId) onError(event.error);\n\t};\n\n\tconst bindSourceEvents = () => {\n\t\tif (onLoadStart || onLoadEnd) map.on('sourcedataloading', sourceLoadStartHandler);\n\t\tif (onLoadEnd) map.on('sourcedata', sourceLoadEndHandler);\n\t\tif (onError) map.on('error', sourceErrorHandler);\n\t};\n\n\tconst unbindSourceEvents = () => {\n\t\tmap.off('sourcedataloading', sourceLoadStartHandler);\n\t\tmap.off('sourcedata', sourceLoadEndHandler);\n\t\tmap.off('error', sourceErrorHandler);\n\t};\n\n\treturn { bindSourceEvents, unbindSourceEvents };\n};\n","export default (map, { onClick, onHover }) => {\n\tconst layerClickHandler = event => onClick(event);\n\tconst layerHoverHandler = event => onHover(event);\n\n\tconst bindLayerEvents = layerId => {\n\t\tif (onClick) map.on('click', layerId, layerClickHandler);\n\t\tif (onHover) {\n\t\t\tmap.on('mouseenter', layerId, layerHoverHandler);\n\t\t\tmap.on('mousemove', layerId, layerHoverHandler);\n\t\t\tmap.on('mouseleave', layerId, layerHoverHandler);\n\t\t}\n\t};\n\n\tconst unbindLayerEvents = layerId => {\n\t\tmap.off('click', layerId, layerClickHandler);\n\t\tmap.off('mouseenter', layerId, layerHoverHandler);\n\t\tmap.off('mousemove', layerId, layerHoverHandler);\n\t\tmap.off('mouseleave', layerId, layerHoverHandler);\n\t};\n\n\treturn { bindLayerEvents, unbindLayerEvents };\n};\n","import { Popup } from 'mapbox-gl';\nimport { usePopupEvents } from './events';\n\nconst uuid = () => Math.random().toString(36).substring(7);\n\nexport default function usePopup(...args) {\n\tconst [map, options = {}] = args.length === 1 ? [, args[0]] : args;\n\tconst { content, coordinates, name = `popup-${uuid()}`, ...rest } = options;\n\tconst { bindPopupEvents } = usePopupEvents(options);\n\n\tconst popup = new Popup(rest);\n\n\tconst setLocation = coords => popup.setLngLat(coords).addTo(map);\n\tconst setContent = newContent => popup.setHTML(newContent);\n\n\t// Instantiate\n\tif (coordinates) setLocation(coordinates);\n\tsetContent(content || `<div id=\"${name}\"></div>`);\n\tbindPopupEvents(popup);\n\n\treturn {\n\t\tget popup() { return popup; },\n\t\tname,\n\t\tsetLocation,\n\t\tsetContent,\n\t};\n}\n","import { NavigationControl, ScaleControl, GeolocateControl, AttributionControl, FullscreenControl } from 'mapbox-gl';\nimport StylesControl from './StylesControl';\nimport TerrainControl from './TerrainControl';\n\nexport default map => {\n\tconst CONTROLS = {};\n\n\tconst addControl = (name, position, control) => {\n\t\tCONTROLS[name] = control;\n\t\tmap.addControl(control, position);\n\t};\n\n\tconst removeControl = name => {\n\t\tif (CONTROLS[name]) {\n\t\t\tmap.removeControl(CONTROLS[name]);\n\t\t\tdelete CONTROLS[name];\n\t\t}\n\t};\n\n\tconst addNavigation = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('navigation', position, new NavigationControl(config));\n\t};\n\n\tconst addScale = ({ position = 'bottom-left', ...config } = {}) => {\n\t\taddControl('scale', position, new ScaleControl(config));\n\t};\n\n\tconst addGeolocate = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('geolocate', position, new GeolocateControl(config));\n\t};\n\n\tconst addAttribution = ({ position = 'bottom-right', ...config } = {}) => {\n\t\taddControl('attribution', position, new AttributionControl(config));\n\t};\n\n\tconst addFullscreen = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('fullscreen', position, new FullscreenControl(config));\n\t};\n\n\tconst addStyles = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('styles', position, new StylesControl(config));\n\t};\n\n\tconst addTerrain = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('terrain', position, new TerrainControl(config));\n\t};\n\n\tconst removeNavigation = () => removeControl('navigation');\n\tconst removeScale = () => removeControl('scale');\n\tconst removeGeolocate = () => removeControl('geolocate');\n\tconst removeAttribution = () => removeControl('attribution');\n\tconst removeFullscreen = () => removeControl('fullscreen');\n\tconst removeStyles = () => removeControl('styles');\n\tconst removeTerrain = () => removeControl('terrain');\n\n\treturn {\n\t\taddControl,\n\t\tremoveControl,\n\t\taddNavigation,\n\t\taddScale,\n\t\taddGeolocate,\n\t\taddAttribution,\n\t\taddFullscreen,\n\t\taddStyles,\n\t\taddTerrain,\n\t\tremoveNavigation,\n\t\tremoveScale,\n\t\tremoveGeolocate,\n\t\tremoveAttribution,\n\t\tremoveFullscreen,\n\t\tremoveStyles,\n\t\tremoveTerrain,\n\t};\n};\n","import useLayer from './layer';\n\nexport default function useGeoJSON(map, options = {}) {\n\t// Adapt to GeoJSON source format\n\tconst geoJSON = useLayer(map, {\n\t\t...options,\n\t\ttype: 'geojson',\n\t\tsource: { data: options.source },\n\t});\n\n\t// Override. GeoJSON can be updated by setting new data\n\tconst updateSource = data => {\n\t\tconst source = map.getSource(options.name);\n\t\tif (source) source.setData(data);\n\t\telse geoJSON.updateSource({ data });\n\t};\n\n\treturn { ...geoJSON, updateSource };\n}\n","import { Map } from 'mapbox-gl';\n\nexport default async function useMap(container, options = {}) {\n\tconst map = new Map({ container, ...options });\n\tawait map.once('load');\n\treturn map;\n}\n","import { Marker } from 'mapbox-gl';\nimport { useMarkerEvents } from './events';\n\nexport default function useMarker(map, options = {}) {\n\tconst { coordinates, popup, ...rest } = options;\n\tconst { bindMarkerEvents } = useMarkerEvents(options);\n\n\tconst marker = new Marker({ ...rest });\n\tlet markerPopup;\n\n\tconst setLocation = coords => marker.setLngLat(coords).addTo(map);\n\tconst setPopup = newPopup => {\n\t\tmarkerPopup = newPopup;\n\t\tmarker.setPopup(newPopup.popup);\n\t};\n\n\t// Instantiate\n\tif (popup) setPopup(popup);\n\tsetLocation(coordinates);\n\tbindMarkerEvents(marker);\n\n\treturn {\n\t\tsetLocation,\n\t\tget marker() { return marker; },\n\t\tget popup() { return markerPopup; },\n\t\tset popup(newPopup) { setPopup(newPopup); },\n\t};\n}\n","export default ({ onDragStart, onDrag, onDragEnd }) => {\n\tconst bindMarkerEvents = marker => {\n\t\tif (onDragStart) marker.on('dragstart', onDragStart);\n\t\tif (onDrag) marker.on('drag', onDrag);\n\t\tif (onDragEnd) marker.on('dragend', onDragEnd);\n\t};\n\n\tconst unbindMarkerEvents = marker => {\n\t\tmarker.on('dragstart', onDragStart);\n\t\tmarker.on('drag', onDrag);\n\t\tmarker.on('dragend', onDragEnd);\n\t};\n\n\treturn { bindMarkerEvents, unbindMarkerEvents };\n};\n","export default ({ onOpen, onClose }) => {\n\tconst bindPopupEvents = popup => {\n\t\tif (onOpen) popup.on('open', onOpen);\n\t\tif (onClose) popup.on('close', onClose);\n\t};\n\n\tconst unbindPopupEvents = popup => {\n\t\tpopup.off('open', onOpen);\n\t\tpopup.off('close', onClose);\n\t};\n\n\treturn { bindPopupEvents, unbindPopupEvents };\n};\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","StylesControl","constructor","styles","this","_styles","_active","_setActive","bind","onAdd","map","_map","_container","classList","add","_buttons","button","img","thumbnail","src","label","textContent","addEventListener","name","setStyle","url","on","forEach","remove","getStyle","index","findIndex","onRemove","parentNode","removeChild","off","undefined","TERRAIN","tileSize","SKY","useTerrain","options","sky","rest","extrude","exaggeration","pitch","addSource","setTerrain","source","easeTo","getLayer","addLayer","id","paint","flatten","getSource","removeSource","removeLayer","isExtruded","getTerrain","TerrainControl","_options","extrudeOnInit","terrain","doExtrude","toggle","isObject","item","Object","useLayer","bindSourceEvents","unbindSourceEvents","sourceId","onError","onLoadStart","onLoadEnd","isSourceLoading","sourceLoadStartHandler","event","sourceDataType","sourceLoadEndHandler","isSourceLoaded","sourceErrorHandler","error","useSourceEvents","bindLayerEvents","unbindLayerEvents","onClick","onHover","layerClickHandler","layerHoverHandler","layerId","useLayerEvents","LAYERS","setVisibility","visible","layers","keys","visibility","setLayoutProperty","clearLayers","addLayers","sourceName","persist","params","i","once","values","clearSource","setSource","key","content","updateSource","isVisible","getLayoutProperty","setFilters","filters","all","filter","Boolean","length","setFilter","uuid","Math","random","toString","substring","CONTROLS","addControl","position","control","removeControl","addNavigation","config","NavigationControl","addScale","ScaleControl","addGeolocate","GeolocateControl","addAttribution","AttributionControl","addFullscreen","FullscreenControl","addStyles","addTerrain","removeNavigation","removeScale","removeGeolocate","removeAttribution","removeFullscreen","removeStyles","removeTerrain","geoJSON","data","setData","async","container","Map","coordinates","popup","bindMarkerEvents","onDragStart","onDrag","onDragEnd","marker","unbindMarkerEvents","useMarkerEvents","Marker","markerPopup","setLocation","coords","setLngLat","addTo","setPopup","newPopup","args","bindPopupEvents","onOpen","onClose","unbindPopupEvents","usePopupEvents","Popup","setContent","newContent","setHTML"],"mappings":"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"}
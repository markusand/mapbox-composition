{"version":3,"file":"index.js","sources":["../src/terrain.js","../node_modules/style-inject/dist/style-inject.es.js","../src/controls/TerrainControl.js","../src/layer.js","../src/events/events.source.js","../src/events/events.layer.js","../src/popup.js","../src/controls/index.js","../src/geojson.js","../src/map.js","../src/marker.js","../src/events/events.marker.js","../src/events/events.popup.js"],"sourcesContent":["const SKY = {\n\t'sky-opacity': ['interpolate', ['linear'], ['zoom'], 0, 0, 8, 1],\n\t'sky-type': 'atmosphere',\n\t'sky-atmosphere-sun-intensity': 5,\n};\n\nexport default function useTerrain(map, options = {}) {\n\tconst { sky = SKY, ...rest } = options;\n\n\tmap.addSource('mapboxgl-dem', {\n\t\ttype: 'raster-dem',\n\t\turl: 'mapbox://mapbox.mapbox-terrain-dem-v1',\n\t\ttileSize: 512,\n\t\t...rest,\n\t});\n\n\tconst extrude = (exaggeration = 1.5) => {\n\t\tmap.setTerrain({ source: 'mapboxgl-dem', exaggeration });\n\t\tif (sky && !map.getLayer('mapboxgl-sky')) {\n\t\t\tmap.addLayer({ id: 'mapboxgl-sky', type: 'sky', paint: sky });\n\t\t}\n\t};\n\n\tconst flatten = () => {\n\t\tmap.setTerrain();\n\t\tif (map.getLayer('mapboxgl-sky')) map.removeLayer('mapboxgl-sky');\n\t};\n\n\tconst isExtruded = () => !!map.getTerrain();\n\n\treturn { extrude, flatten, isExtruded };\n}\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import useTerrain from '../terrain';\nimport './terrain.control.css';\n\nexport default class TerrainControl {\n\tconstructor(options = {}) {\n\t\tthis._options = options;\n\t}\n\n\tonAdd(map) {\n\t\tconst { extrudeOnInit = false, exaggeration, ...options } = this._options;\n\t\tconst terrain = useTerrain(map, options);\n\n\t\tthis._container = document.createElement('div');\n\t\tthis._container.classList.add('mapboxgl-ctrl', 'mapboxgl-ctrl-group');\n\n\t\tconst button = document.createElement('button');\n\t\tbutton.classList.add('mapboxgl-ctrl-terrain');\n\t\tthis._container.appendChild(button);\n\n\t\tconst extrude = doExtrude => {\n\t\t\tif (doExtrude) terrain.extrude(exaggeration);\n\t\t\telse terrain.flatten();\n\t\t\tbutton.classList.toggle('mapboxgl-ctrl-terrain-3d', doExtrude);\n\t\t};\n\n\t\tbutton.addEventListener('click', () => extrude(!terrain.isExtruded()));\n\n\t\t// Reload terrain extrusion state on map style change\n\t\tmap.on('style.load', () => extrude(terrain.isExtruded()));\n\n\t\textrude(extrudeOnInit);\n\n\t\treturn this._container;\n\t}\n\n\tonRemove() {\n\t\tthis._container.parentNode.removeChild(this._container);\n\t}\n}\n","import { useSourceEvents, useLayerEvents } from './events';\n\nconst isObject = item => !!item && item.constructor === Object;\n\nexport default function useLayer(map, options = {}) {\n\tconst { bindSourceEvents, unbindSourceEvents } = useSourceEvents(map, options.name, options);\n\tconst { bindLayerEvents, unbindLayerEvents } = useLayerEvents(map, options);\n\tconst LAYERS = [];\n\n\tconst isVisible = id => map.getLayoutProperty(id, 'visibility') === 'visible';\n\n\tconst setVisibility = (visible, layers = Object.keys(LAYERS)) => {\n\t\tconst visibility = visible ? 'visible' : 'none';\n\t\tlayers.forEach(id => map.setLayoutProperty(id, 'visibility', visibility));\n\t};\n\n\tconst setFilters = (filters = [], layers = Object.keys(LAYERS)) => {\n\t\tconst all = isObject(filters) ? ['all', ...Object.values(filters).filter(Boolean)] : filters;\n\t\tlayers.forEach(id => {\n\t\t\tconst filter = all && all.length ? all : LAYERS[id].filter;\n\t\t\tmap.setFilter(id, filter);\n\t\t});\n\t};\n\n\tconst clearLayers = (layers = Object.keys(LAYERS)) => {\n\t\tlayers.forEach(id => {\n\t\t\tunbindLayerEvents(id);\n\t\t\tif (map.getLayer(id)) map.removeLayer(id);\n\t\t\tif (id in LAYERS) delete LAYERS[id];\n\t\t});\n\t};\n\n\tconst addLayers = (layers = []) => {\n\t\tlayers.forEach(({ name, ...params }, i) => {\n\t\t\tconst id = name || `${options.name}--${i}`;\n\t\t\tLAYERS[id] = params;\n\t\t\tmap.addLayer({ id, source: options.name, ...params });\n\t\t\tbindLayerEvents(id);\n\t\t});\n\t};\n\n\tconst clearSource = () => {\n\t\tclearLayers();\n\t\tunbindSourceEvents();\n\t\tif (map.getSource(options.name)) map.removeSource(options.name);\n\t};\n\n\tconst setSource = source => {\n\t\tconst key = options.type === 'geojson' ? 'data' : 'url';\n\t\tconst content = isObject(source) ? source : { [key]: source };\n\t\tmap.addSource(options.name, { type: options.type, ...content });\n\t\tbindSourceEvents();\n\t};\n\n\tconst updateSource = (source, layers = options.layers) => {\n\t\tclearSource();\n\t\tsetSource(source);\n\t\taddLayers(layers);\n\t};\n\n\tsetSource(options.source);\n\taddLayers(options.layers);\n\n\treturn {\n\t\tclearLayers,\n\t\taddLayers,\n\t\tclearSource,\n\t\tsetSource,\n\t\tupdateSource,\n\t\tisVisible,\n\t\tsetVisibility,\n\t\tsetFilters,\n\t};\n}\n","export default (map, sourceId, { onError, onLoadStart, onLoadEnd }) => {\n\tlet isSourceLoading = false;\n\n\tconst sourceLoadStartHandler = event => {\n\t\tconst { sourceDataType = 'content' } = event; // Little hack here\n\t\tif (event.sourceId === sourceId && !isSourceLoading && sourceDataType === 'content') {\n\t\t\tif (onLoadStart) onLoadStart(event);\n\t\t\tisSourceLoading = true;\n\t\t}\n\t};\n\n\tconst sourceLoadEndHandler = event => {\n\t\tif (event.sourceId === sourceId && isSourceLoading && map.isSourceLoaded(sourceId)) {\n\t\t\tif (onLoadEnd) onLoadEnd(event);\n\t\t\tisSourceLoading = false;\n\t\t}\n\t};\n\n\tconst sourceErrorHandler = event => {\n\t\tif (event.sourceId === sourceId) onError(event.error);\n\t};\n\n\tconst bindSourceEvents = () => {\n\t\tif (onLoadStart || onLoadEnd) map.on('sourcedataloading', sourceLoadStartHandler);\n\t\tif (onLoadEnd) map.on('sourcedata', sourceLoadEndHandler);\n\t\tif (onError) map.on('error', sourceErrorHandler);\n\t};\n\n\tconst unbindSourceEvents = () => {\n\t\tmap.off('sourcedataloading', sourceLoadStartHandler);\n\t\tmap.off('sourcedata', sourceLoadEndHandler);\n\t\tmap.off('error', sourceErrorHandler);\n\t};\n\n\treturn { bindSourceEvents, unbindSourceEvents };\n};\n","export default (map, { onClick, onHover }) => {\n\tconst layerClickHandler = event => onClick(event);\n\tconst layerHoverHandler = event => onHover(event);\n\n\tconst bindLayerEvents = layerId => {\n\t\tif (onClick) map.on('click', layerId, layerClickHandler);\n\t\tif (onHover) {\n\t\t\tmap.on('mouseenter', layerId, layerHoverHandler);\n\t\t\tmap.on('mousemove', layerId, layerHoverHandler);\n\t\t\tmap.on('mouseleave', layerId, layerHoverHandler);\n\t\t}\n\t};\n\n\tconst unbindLayerEvents = layerId => {\n\t\tmap.off('click', layerId, layerClickHandler);\n\t\tmap.off('mouseenter', layerId, layerHoverHandler);\n\t\tmap.off('mousemove', layerId, layerHoverHandler);\n\t\tmap.off('mouseleave', layerId, layerHoverHandler);\n\t};\n\n\treturn { bindLayerEvents, unbindLayerEvents };\n};\n","import { Popup } from 'mapbox-gl';\nimport { usePopupEvents } from './events';\n\nconst uuid = () => Math.random().toString(36).substring(7);\n\nexport default function usePopup(...args) {\n\tconst [map, options = {}] = args.length === 1 ? [, args[0]] : args;\n\tconst { content, coordinates, name = `popup-${uuid()}`, ...rest } = options;\n\tconst { bindPopupEvents } = usePopupEvents(options);\n\n\tconst popup = new Popup(rest);\n\n\tconst setLocation = coords => popup.setLngLat(coords).addTo(map);\n\tconst setContent = newContent => popup.setHTML(newContent);\n\n\t// Instantiate\n\tif (coordinates) setLocation(coordinates);\n\tsetContent(content || `<div id=\"${name}\"></div>`);\n\tbindPopupEvents(popup);\n\n\treturn {\n\t\tget popup() { return popup; },\n\t\tname,\n\t\tsetLocation,\n\t\tsetContent,\n\t};\n}\n","import { NavigationControl, ScaleControl, GeolocateControl, AttributionControl, FullscreenControl } from 'mapbox-gl';\nimport TerrainControl from './TerrainControl';\n\nexport default map => {\n\tconst CONTROLS = {};\n\n\tconst addControl = (name, position, control) => {\n\t\tCONTROLS[name] = control;\n\t\tmap.addControl(control, position);\n\t};\n\n\tconst removeControl = name => {\n\t\tif (CONTROLS[name]) {\n\t\t\tmap.removeControl(CONTROLS[name]);\n\t\t\tdelete CONTROLS[name];\n\t\t}\n\t};\n\n\tconst addNavigation = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('navigation', position, new NavigationControl(config));\n\t};\n\n\tconst addScale = ({ position = 'bottom-left', ...config } = {}) => {\n\t\taddControl('scale', position, new ScaleControl(config));\n\t};\n\n\tconst addGeolocate = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('geolocate', position, new GeolocateControl(config));\n\t};\n\n\tconst addAttribution = ({ position = 'bottom-right', ...config } = {}) => {\n\t\taddControl('attribution', position, new AttributionControl(config));\n\t};\n\n\tconst addFullscreen = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('fullscreen', position, new FullscreenControl(config));\n\t};\n\n\tconst addTerrain = ({ position = 'top-right', ...config } = {}) => {\n\t\taddControl('terrain', position, new TerrainControl(config));\n\t};\n\n\tconst removeNavigation = () => removeControl('navigation');\n\tconst removeScale = () => removeControl('scale');\n\tconst removeGeolocate = () => removeControl('geolocate');\n\tconst removeAttribution = () => removeControl('attribution');\n\tconst removeFullscreen = () => removeControl('fullscreen');\n\tconst removeTerrain = () => removeControl('terrain');\n\n\treturn {\n\t\taddControl,\n\t\tremoveControl,\n\t\taddNavigation,\n\t\taddScale,\n\t\taddGeolocate,\n\t\taddAttribution,\n\t\taddFullscreen,\n\t\taddTerrain,\n\t\tremoveNavigation,\n\t\tremoveScale,\n\t\tremoveGeolocate,\n\t\tremoveAttribution,\n\t\tremoveFullscreen,\n\t\tremoveTerrain,\n\t};\n};\n","import useLayer from './layer';\n\nexport default function useGeoJSON(map, options = {}) {\n\t// Adapt to GeoJSON source format\n\tconst geoJSON = useLayer(map, {\n\t\t...options,\n\t\ttype: 'geojson',\n\t\tsource: { data: options.source },\n\t});\n\n\t// Override. GeoJSON can be updated by setting new data\n\tconst updateSource = data => {\n\t\tconst source = map.getSource(options.name);\n\t\tif (source) source.setData(data);\n\t\telse geoJSON.updateSource({ data });\n\t};\n\n\treturn { ...geoJSON, updateSource };\n}\n","import { Map } from 'mapbox-gl';\n\nexport default async function useMap(container, options = {}) {\n\tconst map = new Map({ container, ...options });\n\tawait map.once('load');\n\treturn map;\n}\n","import { Marker } from 'mapbox-gl';\nimport { useMarkerEvents } from './events';\n\nexport default function useMarker(map, options = {}) {\n\tconst { coordinates, popup, ...rest } = options;\n\tconst { bindMarkerEvents } = useMarkerEvents(options);\n\n\tconst marker = new Marker({ ...rest });\n\tlet markerPopup;\n\n\tconst setLocation = coords => marker.setLngLat(coords).addTo(map);\n\tconst setPopup = newPopup => {\n\t\tmarkerPopup = newPopup;\n\t\tmarker.setPopup(newPopup.popup);\n\t};\n\n\t// Instantiate\n\tif (popup) setPopup(popup);\n\tsetLocation(coordinates);\n\tbindMarkerEvents(marker);\n\n\treturn {\n\t\tsetLocation,\n\t\tget marker() { return marker; },\n\t\tget popup() { return markerPopup; },\n\t\tset popup(newPopup) { setPopup(newPopup); },\n\t};\n}\n","export default ({ onDragStart, onDrag, onDragEnd }) => {\n\tconst bindMarkerEvents = marker => {\n\t\tif (onDragStart) marker.on('dragstart', onDragStart);\n\t\tif (onDrag) marker.on('drag', onDrag);\n\t\tif (onDragEnd) marker.on('dragend', onDragEnd);\n\t};\n\n\tconst unbindMarkerEvents = marker => {\n\t\tmarker.on('dragstart', onDragStart);\n\t\tmarker.on('drag', onDrag);\n\t\tmarker.on('dragend', onDragEnd);\n\t};\n\n\treturn { bindMarkerEvents, unbindMarkerEvents };\n};\n","export default ({ onOpen, onClose }) => {\n\tconst bindPopupEvents = popup => {\n\t\tif (onOpen) popup.on('open', onOpen);\n\t\tif (onClose) popup.on('close', onClose);\n\t};\n\n\tconst unbindPopupEvents = popup => {\n\t\tpopup.off('open', onOpen);\n\t\tpopup.off('close', onClose);\n\t};\n\n\treturn { bindPopupEvents, unbindPopupEvents };\n};\n"],"names":["SKY","useTerrain","map","options","sky","rest","addSource","type","url","tileSize","extrude","exaggeration","setTerrain","source","getLayer","addLayer","id","paint","flatten","removeLayer","isExtruded","getTerrain","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","TerrainControl","constructor","this","_options","onAdd","extrudeOnInit","terrain","_container","classList","add","button","doExtrude","toggle","addEventListener","on","onRemove","parentNode","removeChild","isObject","item","Object","useLayer","bindSourceEvents","unbindSourceEvents","sourceId","onError","onLoadStart","onLoadEnd","isSourceLoading","sourceLoadStartHandler","event","sourceDataType","sourceLoadEndHandler","isSourceLoaded","sourceErrorHandler","error","off","useSourceEvents","name","bindLayerEvents","unbindLayerEvents","onClick","onHover","layerClickHandler","layerHoverHandler","layerId","useLayerEvents","LAYERS","clearLayers","layers","keys","forEach","addLayers","params","i","clearSource","getSource","removeSource","setSource","key","content","updateSource","isVisible","getLayoutProperty","setVisibility","visible","visibility","setLayoutProperty","setFilters","filters","all","values","filter","Boolean","length","setFilter","uuid","Math","random","toString","substring","CONTROLS","addControl","position","control","removeControl","addNavigation","config","NavigationControl","addScale","ScaleControl","addGeolocate","GeolocateControl","addAttribution","AttributionControl","addFullscreen","FullscreenControl","addTerrain","removeNavigation","removeScale","removeGeolocate","removeAttribution","removeFullscreen","removeTerrain","geoJSON","data","setData","async","container","Map","once","coordinates","popup","bindMarkerEvents","onDragStart","onDrag","onDragEnd","marker","unbindMarkerEvents","useMarkerEvents","Marker","markerPopup","setLocation","coords","setLngLat","addTo","setPopup","newPopup","args","bindPopupEvents","onOpen","onClose","unbindPopupEvents","usePopupEvents","Popup","setContent","newContent","setHTML"],"mappings":"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"}